<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin - MEDYRA</title>
<link rel="icon" type="image/png" href="logo.png">
<style>
body {
  margin: 0;
  font-family: Arial, sans-serif;
  color: white;
  text-align: center;
  overflow-x: hidden;
  min-height: 100vh;
  background: url('fond.png') no-repeat center center;
  background-size: cover;
  position: relative;
}
body::before {
  content: "";
  position: fixed;
  top: 0; left: 0;
  width: 100%; height: 100%;
  background: rgba(80,0,120,0.6);
  z-index: -1;
}

.fade-in {
  opacity: 0;
  transform: translateY(-30px);
  animation: fadeIn 1s forwards;
}
h1 { animation-delay: 0.2s; }
#login-section { animation-delay: 0.4s; }
#admin-section { animation-delay: 0.6s; }

@keyframes fadeIn { to { opacity: 1; transform: translateY(0); } }

input, button { padding: 12px; margin: 10px 0; border-radius: 8px; border: none; width: 250px; max-width: 90%; font-size: 16px; }
button { background: black; color: white; cursor: pointer; transition: 0.3s; }
button:hover { background: #ff00ff; }

#messages { margin-top: 30px; text-align: left; max-width: 800px; margin-left: auto; margin-right: auto; }
.message { background: rgba(30,0,60,0.85); padding: 15px; border-radius: 10px; margin-bottom: 10px; }

#login-error { color: #ff6666; }

.back-btn {
  position: fixed;
  top: 20px; left: 20px;
  padding: 12px 25px;
  background: rgba(0,0,0,0.8);
  border: 2px solid #b400ff;
  border-radius: 12px;
  color: white;
  font-weight: bold;
  font-size: 16px;
  cursor: pointer;
  text-shadow: 0 0 5px #ff66ff, 0 0 10px #b400ff;
  box-shadow: 0 0 15px #ff66ff, 0 0 25px #b400ff;
  transition: 0.3s;
  z-index: 1000;
}
.back-btn::before {
  content: "";
  position: absolute;
  top: -20px; bottom: -20px;
  left: -20px; right: -20px;
}
</style>
</head>
<body>

<button class="back-btn" onclick="history.back()">‚Üê Retour</button>

<h1 class="fade-in">üîê Espace Admin - MEDYRA</h1>

<div id="login-section" class="fade-in">
  <p>Veuillez vous connecter pour acc√©der aux messages :</p>
  <input type="text" id="username" placeholder="Identifiant" required><br>
  <input type="password" id="password" placeholder="Mot de passe" required><br>
  <input type="text" id="code" placeholder="Code personnel" required><br>
  <button id="login-btn">Se connecter</button>
  <p id="login-error"></p>
</div>

<div id="admin-section" style="display:none;">
  <h2 class="fade-in">üì¨ Messages re√ßus</h2>
  <div id="messages" class="fade-in"></div>
</div>

<script>
const ADMIN_USERNAME = "Glo_Kyr";
const ADMIN_PASSWORD = "MedyraFBM33";
const ADMIN_CODE = "102020";

const loginBtn = document.getElementById("login-btn");
loginBtn.addEventListener("click", () => {
  const username = document.getElementById("username").value.trim();
  const password = document.getElementById("password").value.trim();
  const code = document.getElementById("code").value.trim();
  const error = document.getElementById("login-error");

  if(username === ADMIN_USERNAME && password === ADMIN_PASSWORD && code === ADMIN_CODE){
    document.getElementById("login-section").style.display = "none";
    document.getElementById("admin-section").style.display = "block";
    loadMessages();
  } else {
    error.textContent = "‚ö†Ô∏è Identifiant, mot de passe ou code incorrect !";
  }
});

// ‚ö° Charge les messages depuis Getform
function loadMessages(){
  const container = document.getElementById("messages");
  container.innerHTML = "<p>Chargement des messages...</p>";

  // Remplace cette URL par ton export JSON Getform
  const GETFORM_JSON_URL = "https://getform.io/f/{ton-endpoint}/submissions.json";

  fetch(GETFORM_JSON_URL)
    .then(res => res.json())
    .then(data => {
      container.innerHTML = "";
      if(!data.length){
        container.innerHTML = "<p>Aucun message re√ßu pour le moment.</p>";
        return;
      }

      data.forEach(msg => {
        const div = document.createElement("div");
        div.classList.add("message", "fade-in");
        div.innerHTML = `<strong>${msg.pseudo || "Anonyme"}</strong> &lt;${msg.email}&gt; <em>le ${new Date(msg.date).toLocaleString()}</em><br>${msg.message}`;
        container.appendChild(div);
      });
    })
    .catch(err => {
      console.error(err);
      container.innerHTML = "<p>Erreur lors du chargement des messages.</p>";
    });
}
</script>

</body>
</html>
